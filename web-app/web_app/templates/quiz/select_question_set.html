{% extends 'base.html' %}

{% block title %}Ch·ªçn B√†i tr·∫Øc nghi·ªám - MindStack{% endblock %}

{% block content %}
<div class="container select-set-container">
    
    <!-- Ph·∫ßn "B·ªô b√†i c·ªßa b·∫°n" -->
    <div class="set-category">
        <h2 class="set-category-header">üìù B·ªô c√¢u h·ªèi c·ªßa b·∫°n</h2>
        {% if started_sets %}
            <ul class="set-list">
                {% for set_item in started_sets %}
                    <li class="set-item">
                        <a href="{{ url_for('quiz.take_set', set_id=set_item.set_id) }}" class="set-item-progress-link">
                            <!-- L·ªõp t√¥ m√†u ti·∫øn tr√¨nh -->
                            {% set percentage = (set_item.answered_questions * 100 / set_item.total_questions) | int if set_item.total_questions > 0 else 0 %}
                            <div class="progress-fill" style="--progress-width: {{ percentage }}%;"></div>
                            
                            <!-- L·ªõp ch·ª©a n·ªôi dung -->
                            <div class="set-content-overlay">
                                <div class="set-info">
                                    <span class="set-title">{{ set_item.title }}</span>
                                    <span class="set-creator">t·∫°o b·ªüi {{ set_item.creator_username }}</span>
                                </div>
                                <div class="progress-text-overlay">
                                    <span>{{ set_item.answered_questions }} / {{ set_item.total_questions }}</span>
                                </div>
                            </div>
                        </a>
                    </li>
                {% endfor %}
            </ul>
        {% else %}
            <p class="empty-message">B·∫°n ch∆∞a l√†m b√†i tr·∫Øc nghi·ªám n√†o. H√£y kh√°m ph√° c√°c b√†i m·ªõi b√™n d∆∞·ªõi!</p>
        {% endif %}
    </div>

    <!-- Ph·∫ßn "Kh√°m ph√°" -->
    <div class="set-category">
        <h2 class="set-category-header">üöÄ Kh√°m ph√° b√†i tr·∫Øc nghi·ªám m·ªõi</h2>
        {% if new_sets %}
            <ul class="set-list">
                {% for set_item in new_sets %}
                    <li class="set-item-not_started">
                        <a href="{{ url_for('quiz.take_set', set_id=set_item.set_id) }}">
                            <div class="set-info">
                                <span class="set-title">{{ set_item.title }}</span>
                                <span class="set-creator">t·∫°o b·ªüi {{ set_item.creator_username }}</span>
                            </div>
                            <span class="set-status-indicator not-started-set-indicator">B·∫Øt ƒë·∫ßu l√†m</span>
                        </a>
                    </li>
                {% endfor %}
            </ul>
        {% else %}
            <p class="empty-message">Kh√¥ng c√≥ b√†i tr·∫Øc nghi·ªám m·ªõi n√†o ƒë·ªÉ kh√°m ph√°.</p>
        {% endif %}
    </div>

</div>
{% endblock %}
